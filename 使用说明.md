# iframe源爬取工具使用说明

## 功能说明

此工具用于从itch.io网站爬取免费网页游戏的iframe源地址，只从`div class="iframe_placeholder"`的`data-iframe`属性中获取`src`值。

爬虫会分析网页游戏页面中的iframe_placeholder元素，提取其data-iframe属性的值，然后从中解析出iframe的src属性，这个值就是游戏的实际嵌入地址。

## 运行步骤

1. **运行爬虫脚本**：
   ```
   python iframe_scraper.py
   ```
   默认情况下，脚本会爬取前10个免费网页游戏，然后保存结果到`results/game_iframes.json`文件中。
   爬取过程的日志会保存在`logs`目录下。

2. **查看爬取结果**：
   打开`iframe_viewer.html`文件，点击"选择JSON文件"按钮，选择生成的`results/game_iframes.json`文件。
   然后点击每个游戏的"点击开始游戏"按钮来加载并播放游戏。

## 注意事项

- 爬虫只会从`div class="iframe_placeholder"`的`data-iframe`属性中获取`src`值
- 爬取的游戏HTML会保存在`debug_html`目录下，用于调试
- 某些游戏可能无法加载或显示，这可能是由于游戏本身的限制或浏览器的安全策略
- iframe_viewer.html采用了延迟加载策略，必须点击"开始游戏"按钮后才会加载iframe内容，这样可以避免"NotAllowedError: play() failed"错误

## 目录结构

- `iframe_scraper.py`: 爬虫脚本，用于爬取itch.io游戏iframe源
- `iframe_viewer.html`: HTML查看器，用于显示爬取的游戏
- `results/`: 保存爬取结果的目录
- `logs/`: 保存爬取日志的目录
- `debug_html/`: 保存爬取的游戏HTML页面的目录

## 技术实现

爬虫使用Python标准库实现，主要用到了以下模块：
- urllib.request: 用于发送HTTP请求
- re: 用于正则表达式匹配
- html: 用于解码HTML实体
- json: 用于保存爬取结果
- logging: 用于记录爬取日志

HTML查看器使用纯JavaScript实现，采用延迟加载策略，避免音频自动播放问题。 